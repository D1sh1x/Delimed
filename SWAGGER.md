# Swagger документация для API

## Установка зависимостей

Для генерации Swagger документации необходимо установить `swag`:

```bash
go install github.com/swaggo/swag/cmd/swag@latest
```

Убедитесь, что `$GOPATH/bin` или `$GOBIN` добавлен в `PATH`.

## Генерация документации

После установки `swag`, выполните следующую команду из корня проекта:

```bash
swag init -g cmd/api/main.go
```

Эта команда:
- Просканирует все файлы проекта
- Найдет все Swagger аннотации
- Сгенерирует файлы документации в папке `docs/`

## Структура сгенерированных файлов

После генерации будет создана папка `docs/` со следующими файлами:
- `docs/swagger.json` - JSON спецификация OpenAPI
- `docs/swagger.yaml` - YAML спецификация OpenAPI
- `docs/docs.go` - Go код для встраивания документации

## Включение документации в код

После генерации документации, раскомментируйте импорт в `cmd/api/main.go`:

```go
import (
    // ... другие импорты
    _ "delimed/docs" // swagger docs
)
```

Это встроит документацию в бинарный файл приложения.

## Доступ к Swagger UI

После запуска сервера, Swagger UI будет доступен по адресу:
```
http://localhost:8080/swagger/index.html
```

## API Endpoints

### Публичные endpoints:
- `POST /register` - Регистрация пользователя
- `POST /login` - Вход пользователя
- `GET /tariffslist` - Получить список тарифов СДЭК
- `GET /tariffs` - Получить расчет тарифа СДЭК
- `POST /delivery/calculate` - Расчет вариантов доставки

### Защищенные endpoints (требуют JWT токен):
- `GET /api/user` - Получить профиль пользователя
- `DELETE /api/user` - Удалить профиль пользователя

## Аутентификация

Для доступа к защищенным endpoints необходимо:
1. Выполнить вход через `POST /login`
2. Получить JWT токен из ответа
3. Использовать токен в заголовке `Authorization` в формате: `Bearer <token>`

В Swagger UI можно использовать кнопку "Authorize" для ввода токена.

## Обновление документации

После изменения аннотаций в коде, необходимо повторно выполнить:
```bash
swag init -g cmd/api/main.go
```

## Примечания

- Все аннотации находятся в файлах handlers
- Основная информация об API находится в `cmd/api/swagger.go`
- DTO структуры содержат примеры значений для документации

