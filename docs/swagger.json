{
    "swagger": "2.0",
    "info": {
        "contact": {}
    },
    "paths": {
        "/api/user": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Возвращает информацию о текущем аутентифицированном пользователе",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "user"
                ],
                "summary": "Получить профиль пользователя",
                "responses": {
                    "200": {
                        "description": "Профиль пользователя",
                        "schema": {
                            "$ref": "#/definitions/response.UserResponse"
                        }
                    },
                    "401": {
                        "description": "Пользователь не аутентифицирован",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Пользователь не найден",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Внутренняя ошибка сервера",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Удаляет учетную запись текущего аутентифицированного пользователя",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "user"
                ],
                "summary": "Удалить профиль пользователя",
                "responses": {
                    "200": {
                        "description": "Пользователь успешно удален",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "Пользователь не аутентифицирован",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Пользователь не найден",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Внутренняя ошибка сервера",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/delivery/calculate": {
            "post": {
                "description": "Возвращает варианты доставки от всех провайдеров (СДЭК, Деловые Линии) с фильтрацией по типу доставки",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "delivery"
                ],
                "summary": "Расчет вариантов доставки",
                "parameters": [
                    {
                        "description": "Параметры для расчета доставки",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.DeliveryCalcRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Варианты доставки",
                        "schema": {
                            "$ref": "#/definitions/domain.FilterResult"
                        }
                    },
                    "400": {
                        "description": "Неверный формат входных данных",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Внутренняя ошибка сервера",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/login": {
            "post": {
                "description": "Аутентификация пользователя и получение JWT токена",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Вход пользователя",
                "parameters": [
                    {
                        "description": "Данные для входа",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.SignInInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Токен доступа",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Неверный формат входных данных",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "Неверные учетные данные",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/register": {
            "post": {
                "description": "Создает новую учетную запись пользователя",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Регистрация нового пользователя",
                "parameters": [
                    {
                        "description": "Данные для регистрации",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.SignUpInput"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Регистрация успешна",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Неверный формат входных данных",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "409": {
                        "description": "Пользователь уже существует",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/tariffs": {
            "get": {
                "description": "Возвращает детальный расчет стоимости доставки по конкретному тарифу СДЭК",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "delivery"
                ],
                "summary": "Получить расчет тарифа СДЭК",
                "parameters": [
                    {
                        "description": "Параметры для расчета тарифа",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.CDEKRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Расчет тарифа",
                        "schema": {
                            "$ref": "#/definitions/response.CDEKTariffCalcResponse"
                        }
                    },
                    "400": {
                        "description": "Неверный формат входных данных",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Внутренняя ошибка сервера",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/tariffslist": {
            "get": {
                "description": "Возвращает список доступных тарифов СДЭК для указанных параметров доставки",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "delivery"
                ],
                "summary": "Получить список тарифов СДЭК",
                "parameters": [
                    {
                        "description": "Параметры для расчета тарифов",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.CDEKRequestList"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Список тарифов",
                        "schema": {
                            "$ref": "#/definitions/response.CDEKTariffListResponse"
                        }
                    },
                    "400": {
                        "description": "Неверный формат входных данных",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Внутренняя ошибка сервера",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "domain.DeliveryOption": {
            "description": "Вариант доставки от провайдера (СДЭК или Деловые Линии)",
            "type": "object",
            "properties": {
                "currency": {
                    "description": "\"RUB\"",
                    "type": "string",
                    "example": "RUB"
                },
                "delivery_type": {
                    "description": "pickup / door",
                    "allOf": [
                        {
                            "$ref": "#/definitions/domain.DeliveryType"
                        }
                    ],
                    "example": "door"
                },
                "eta_from": {
                    "description": "дата \"от\"",
                    "type": "string",
                    "example": "2024-01-20T00:00:00Z"
                },
                "eta_to": {
                    "description": "дата \"до\"",
                    "type": "string",
                    "example": "2024-01-22T00:00:00Z"
                },
                "name": {
                    "description": "человекочитаемое имя тарифа",
                    "type": "string",
                    "example": "Экспресс-лайт"
                },
                "price": {
                    "description": "итоговая цена (минимальные единицы, копейки)",
                    "type": "integer",
                    "example": 150000
                },
                "provider": {
                    "description": "\"cdek\" / \"dellin\"",
                    "type": "string",
                    "example": "cdek"
                },
                "tariff_code": {
                    "description": "код тарифа провайдера",
                    "type": "string",
                    "example": "139"
                }
            }
        },
        "domain.DeliveryType": {
            "type": "string",
            "enum": [
                "pickup",
                "door"
            ],
            "x-enum-comments": {
                "DeliveryTypeDoor": "до двери",
                "DeliveryTypePickup": "самовывоз"
            },
            "x-enum-varnames": [
                "DeliveryTypePickup",
                "DeliveryTypeDoor"
            ]
        },
        "domain.FilterResult": {
            "description": "Результат расчета вариантов доставки с фильтрацией по типу",
            "type": "object",
            "properties": {
                "options": {
                    "description": "отфильтрованные или fallback",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/domain.DeliveryOption"
                    }
                },
                "status": {
                    "description": "\"ok\" или \"error\"",
                    "type": "string",
                    "example": "ok"
                }
            }
        },
        "request.CDEKRequest": {
            "type": "object",
            "required": [
                "from_address",
                "height",
                "length",
                "tariff_code",
                "to_address",
                "weight",
                "width"
            ],
            "properties": {
                "from_address": {
                    "description": "Адрес отправления",
                    "type": "string",
                    "example": "Москва"
                },
                "height": {
                    "description": "Высота в см",
                    "type": "integer",
                    "example": 15
                },
                "length": {
                    "description": "Длина в см",
                    "type": "integer",
                    "example": 30
                },
                "tariff_code": {
                    "description": "Код тарифа СДЭК",
                    "type": "integer",
                    "example": 139
                },
                "to_address": {
                    "description": "Адрес доставки",
                    "type": "string",
                    "example": "Санкт-Петербург"
                },
                "weight": {
                    "description": "Вес в граммах",
                    "type": "integer",
                    "example": 2500
                },
                "width": {
                    "description": "Ширина в см",
                    "type": "integer",
                    "example": 20
                }
            }
        },
        "request.CDEKRequestList": {
            "type": "object",
            "required": [
                "from_address",
                "height",
                "length",
                "to_address",
                "weight",
                "width"
            ],
            "properties": {
                "from_address": {
                    "description": "Адрес отправления",
                    "type": "string",
                    "example": "Москва"
                },
                "height": {
                    "description": "Высота в см",
                    "type": "integer",
                    "example": 15
                },
                "length": {
                    "description": "Длина в см",
                    "type": "integer",
                    "example": 30
                },
                "to_address": {
                    "description": "Адрес доставки",
                    "type": "string",
                    "example": "Санкт-Петербург"
                },
                "weight": {
                    "description": "Вес в граммах",
                    "type": "integer",
                    "example": 2500
                },
                "width": {
                    "description": "Ширина в см",
                    "type": "integer",
                    "example": 20
                }
            }
        },
        "request.DeliveryCalcRequest": {
            "description": "Единый запрос для расчета вариантов доставки от всех провайдеров",
            "type": "object",
            "required": [
                "delivery_type",
                "from_address",
                "height_cm",
                "length_cm",
                "to_address",
                "weight_kg",
                "width_cm"
            ],
            "properties": {
                "delivery_type": {
                    "description": "Тип доставки: самовывоз / дверь\npickup — самовывоз из ПВЗ/терминала\ndoor   — доставка до двери",
                    "type": "string",
                    "example": "door"
                },
                "extra_services": {
                    "description": "Доп услуги",
                    "allOf": [
                        {
                            "$ref": "#/definitions/request.ExtraServices"
                        }
                    ]
                },
                "from_address": {
                    "description": "Адреса",
                    "type": "string",
                    "example": "Москва, ул. Ленина, д. 1"
                },
                "height_cm": {
                    "description": "Высота в см",
                    "type": "integer",
                    "example": 15
                },
                "length_cm": {
                    "description": "Габариты",
                    "type": "integer",
                    "example": 30
                },
                "shipment_date": {
                    "description": "Дата отгрузки (если нет — можно подставлять today / today+1 на бэкенде)",
                    "type": "string",
                    "example": "2024-01-15"
                },
                "speed": {
                    "description": "Тариф по скорости (сейчас нужна только фильтрация по типу доставки,\nно speed лучше сразу оставить в модели на будущее)",
                    "type": "string",
                    "example": "economy"
                },
                "to_address": {
                    "description": "Адрес доставки",
                    "type": "string",
                    "example": "Санкт-Петербург, Невский пр., д. 1"
                },
                "weight_kg": {
                    "description": "Вес",
                    "type": "number",
                    "example": 2.5
                },
                "width_cm": {
                    "description": "Ширина в см",
                    "type": "integer",
                    "example": 20
                }
            }
        },
        "request.ExtraServices": {
            "description": "Дополнительные услуги для расчета доставки",
            "type": "object",
            "properties": {
                "floor": {
                    "description": "этаж доставки (если не указан, используется 1)",
                    "type": "integer",
                    "example": 5
                },
                "has_elevator": {
                    "description": "наличие лифта (для будущего использования)",
                    "type": "boolean",
                    "example": false
                },
                "insurance_value": {
                    "description": "объявленная стоимость, 0 если не нужно",
                    "type": "integer",
                    "example": 5000
                },
                "need_courier": {
                    "description": "курьеры/адресная доставка/грузчики",
                    "type": "boolean",
                    "example": false
                },
                "need_documents": {
                    "description": "работа с документами",
                    "type": "boolean",
                    "example": false
                },
                "need_packing": {
                    "description": "упаковка",
                    "type": "boolean",
                    "example": false
                },
                "need_storage": {
                    "description": "хранение",
                    "type": "boolean",
                    "example": false
                },
                "need_unloading": {
                    "description": "разгрузочные работы / подъём на этаж",
                    "type": "boolean",
                    "example": false
                }
            }
        },
        "request.SignInInput": {
            "type": "object",
            "required": [
                "password",
                "username"
            ],
            "properties": {
                "password": {
                    "description": "Пароль",
                    "type": "string",
                    "example": "password123"
                },
                "username": {
                    "description": "Имя пользователя",
                    "type": "string",
                    "example": "user123"
                }
            }
        },
        "request.SignUpInput": {
            "type": "object",
            "required": [
                "password",
                "passwordConfirm",
                "username"
            ],
            "properties": {
                "password": {
                    "description": "Пароль (минимум 8 символов)",
                    "type": "string",
                    "minLength": 8,
                    "example": "password123"
                },
                "passwordConfirm": {
                    "description": "Подтверждение пароля",
                    "type": "string",
                    "example": "password123"
                },
                "username": {
                    "description": "Имя пользователя",
                    "type": "string",
                    "example": "user123"
                }
            }
        },
        "response.CDEKDeliveryDateRange": {
            "type": "object",
            "properties": {
                "max": {
                    "description": "\"2022-02-04\"",
                    "type": "string"
                },
                "min": {
                    "description": "\"2022-02-02\"",
                    "type": "string"
                }
            }
        },
        "response.CDEKErrorMessage": {
            "type": "object",
            "properties": {
                "additional_code": {
                    "type": "string"
                },
                "code": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            }
        },
        "response.CDEKServicePrice": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string"
                },
                "discount_percent": {
                    "type": "number"
                },
                "discount_sum": {
                    "type": "number"
                },
                "sum": {
                    "type": "number"
                },
                "total_sum": {
                    "type": "number"
                },
                "vat_rate": {
                    "type": "number"
                },
                "vat_sum": {
                    "type": "number"
                }
            }
        },
        "response.CDEKTariffCalcResponse": {
            "type": "object",
            "properties": {
                "calendar_max": {
                    "type": "integer"
                },
                "calendar_min": {
                    "type": "integer"
                },
                "currency": {
                    "type": "string"
                },
                "delivery_date_range": {
                    "$ref": "#/definitions/response.CDEKDeliveryDateRange"
                },
                "delivery_sum": {
                    "type": "number"
                },
                "errors": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.CDEKErrorMessage"
                    }
                },
                "period_max": {
                    "type": "integer"
                },
                "period_min": {
                    "type": "integer"
                },
                "services": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.CDEKServicePrice"
                    }
                },
                "total_sum": {
                    "type": "number"
                },
                "warnings": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.CDEKWarningMessage"
                    }
                },
                "weight_calc": {
                    "type": "integer"
                }
            }
        },
        "response.CDEKTariffListItem": {
            "type": "object",
            "properties": {
                "calendar_max": {
                    "type": "integer"
                },
                "calendar_min": {
                    "type": "integer"
                },
                "delivery_date_range": {
                    "$ref": "#/definitions/response.CDEKDeliveryDateRange"
                },
                "delivery_mode": {
                    "type": "integer"
                },
                "delivery_sum": {
                    "type": "number"
                },
                "period_max": {
                    "type": "integer"
                },
                "period_min": {
                    "type": "integer"
                },
                "tariff_code": {
                    "type": "integer"
                },
                "tariff_description": {
                    "type": "string"
                },
                "tariff_name": {
                    "type": "string"
                }
            }
        },
        "response.CDEKTariffListResponse": {
            "type": "object",
            "properties": {
                "errors": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.CDEKErrorMessage"
                    }
                },
                "tariff_codes": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.CDEKTariffListItem"
                    }
                },
                "warnings": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.CDEKWarningMessage"
                    }
                }
            }
        },
        "response.CDEKWarningMessage": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            }
        },
        "response.UserResponse": {
            "type": "object",
            "properties": {
                "created_at": {
                    "description": "Дата создания",
                    "type": "string",
                    "example": "2024-01-15T10:00:00Z"
                },
                "id": {
                    "description": "UUID пользователя",
                    "type": "string",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                },
                "role": {
                    "description": "Роль пользователя",
                    "type": "string",
                    "example": "user"
                },
                "updated_at": {
                    "description": "Дата обновления",
                    "type": "string",
                    "example": "2024-01-15T10:00:00Z"
                },
                "username": {
                    "description": "Имя пользователя",
                    "type": "string",
                    "example": "user123"
                }
            }
        }
    }
}